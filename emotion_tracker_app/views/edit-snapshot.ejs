<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insightful Emotions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>

    <header>

        <div class="container-fluid">

            <nav class="navbar navbar-expand-lg bg-body-tertiary">
                <ul>
                    <li class="nav-item"><a class="nav-link" href="create-snapshot.html">New Snapshot</a></li>
                    <li class="nav-item"><a class="nav-link" href="summary.html">Snapshot Summary</a></li>
                    <li class="nav-item"><a class="nav-link" href="insights.html">Insights</a></li>
                </ul>
            </nav>

        </div>
    </header>

    <main>

        <h1>Create Snapshot</h1>

        <form action="/create-snapshot" method="post">

            <h4>

                <label for="snapshot_title">Snapshot Headline:</label>

            </h4>

            <div>

                <input type="text" name="snapshot_headline" value="<%= apiData.snap[0].title %>" id="snapshot-title">

            </div>

            <br>

            <div>
                <p>Date & Time Created: <span> <%= apiDate %></span></p>
            </div>

            <br>

            <h6>Please record current <b>emotion intensity</b> levels (1 = least intense, 10 = most intense):</h6>
            <br>

            
            <%# Iterate over apiData object and extract only intensity data for keys relating to emotions %>

            <% let emotionLvls={}; 
            Object.keys(apiData).forEach(function(key) {
                 if (['snap', 'trig'].indexOf(key)===-1) { 
                    emotionLvls[key]=apiData[key][0].intensity; } }); %>


                <div class="slidecontainer">
                    <input type="range" name="anger_val" min="1" max="10" value="<%= emotionLvls.ang %>" class="slider"
                        id="anger-slider">
                </div>
                <p>Anger: <output id="anger-value"></output></p>

                <div class="slidecontainer">
                    <input type="range" name="contempt_val" min="1" max="10" value="<%= emotionLvls.cont %>" class="slider"
                        id="contempt-slider">
                </div>
                <p>Contempt: <output id="contempt-value"></output></p>

                <div class="slidecontainer">
                    <input type="range" name="disgust_val" min="1" max="10" value="<%= emotionLvls.disg %>" class="slider"
                        id="disgust-slider">
                </div>
                <p>Disgust: <output id="disgust-value"></output></p>

                <div class="slidecontainer">
                    <input type="range" name="enjoyment_val" min="1" max="10" value="<%= emotionLvls.enj %>"
                        class="slider" id="enjoyment-slider">
                    <p>Enjoyment: <output id="enjoyment-value"></output></p>
                </div>

                <div class="slidecontainer">
                    <input type="range" name="fear_val" min="1" max="10" value="<%= emotionLvls.fear %>" class="slider"
                        id="fear-slider">
                </div>
                <p>Fear: <output id="fear-value"></output></p>

                <div class="slidecontainer">
                    <input type="range" name="sadness_val" min="1" max="10" value="<%= emotionLvls.sad %>" class="slider"
                        id="sadness-slider">
                    <p>Sadness: <output id="sadness-value"></output></p>
                </div>

                <div class="slidecontainer">
                    <input type="range" name="surprise_val" min="1" max="10" value="<%= emotionLvls.surp %>" class="slider"
                        id="surprise-slider">
                </div>
                <p>Surprise: <output id="surprise-value"></output></p>


                <%# extract the 3 triggers from the trig object array %>
                <% let trig_1=null, trig_2=null, trig_3=null; let trig_num=1; 
                 trig_1 = apiData.trig[0].name;
                 trig_2 = apiData.trig[1].name;
                 trig_3 = apiData.trig[2].name; %>


                    <h6><b>Contextual Triggers:</b></h6>

                    <div>

                        <input type="text" name="trigger_1" value="<%= trig_1 %>" id="trigger-create">

                    </div>

                    <div>

                        <input type="text" name="trigger_2" value="<%= trig_2 %>" id="trigger-create">

                    </div>

                    <div>

                        <input type="text" name="trigger_3" value="<%= trig_3 %>" id="trigger-create">

                    </div>

                    <div>
                        <p>

                            <label for="snapshot-notes">Additional Notes:</label>

                        </p>
                    </div>


                    <div>

                        <input type="text" name="snapshot_note" value="<%= apiData.snap[0].notes %>" id="snapshot-notes">

                    </div>

                    <div>
                        <button type="submit" name="snapshot-create">Save Snapshot</button>
                        <br>

                    </div>

        </form>


    </main>


    <script src=".js/edit-snapshot.js"></script>
</body>

</html>